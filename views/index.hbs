<div id="reportsPage">
    <div class="" id="home">

        <div class="container">
            <div class="row">
                <div class="col">
                    <p class="text-white mt-5 mb-5">Welcome back, <b>Admin</b></p>
                </div>
            </div>
            <!-- row -->
            <div class="row tm-content-row">
                <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
                    <div class="tm-bg-primary-dark tm-block">
                        <h2 class="tm-block-title">Revenue Report</h2>
                        <select id="revenueTimeRange" class="form-control mb-3">
                            <option value="day">Day</option>
                            <option value="week">Week</option>
                            <option value="month">Month</option>
                        </select>
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
                <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
                    <div class="tm-bg-primary-dark tm-block">
                        <h2 class="tm-block-title">Top Revenue by Product</h2>
                        <select id="topRevenueTimeRange" class="form-control mb-3">
                            <option value="day">Day</option>
                            <option value="week">Week</option>
                            <option value="month">Month</option>
                        </select>
                        <canvas id="topRevenueChart"></canvas>
                    </div>
                </div>
                <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
                    <div class="tm-bg-primary-dark tm-block tm-block-taller tm-block-overflow">
                        <h2 class="tm-block-title">Notification List</h2>
                        <div class="tm-notification-items">
                            {{#each recentOrders}}
                            <div class="media tm-notification-item">
                                <div class="tm-gray-circle">
                                    <img src="{{this.url}}" alt="Avatar Image" class="rounded-circle avatar-fill">
                                </div>
                                <div class="media-body">
                                    <p class="mb-2"><b>{{this.customerName}}</b> placed an order with ID <b>{{this.id}}</b>.</p>
                                    <span class="tm-small tm-text-color-secondary">{{this.createdAt}}</span>
                                </div>
                            </div>
                            {{/each}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="tm-footer row tm-mt-small">
            <div class="col-12 font-weight-light">
                <p class="text-center text-white mb-0 px-4 small">
                    Copyright &copy; <b>2018</b> All rights reserved. 
                    
                    Design: <a rel="nofollow noopener" href="https://templatemo.com" class="tm-footer-link">Template Mo</a>
                </p>
            </div>
        </footer>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Revenue Report Chart
        const revenueData = {{json revenueReport}};
        const revenueLabels = revenueData.map(item => item.date);
        const revenueValues = revenueData.map(item => item.totalRevenue);

        const revenueChartCtx = document.getElementById('revenueChart').getContext('2d');
        new Chart(revenueChartCtx, {
            type: 'line',
            data: {
                labels: revenueLabels,
                datasets: [{
                    label: 'Revenue',
                    data: revenueValues,
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    x: {
                        type: 'time',
                        time: {
                            unit: 'day'
                        }
                    },
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // Top Revenue Products Chart
        const topRevenueData = {{json topRevenueProducts}};
        const topRevenueLabels = topRevenueData.map(item => item.productName);
        const topRevenueValues = topRevenueData.map(item => item.totalRevenue);

        const topRevenueChartCtx = document.getElementById('topRevenueChart').getContext('2d');
        new Chart(topRevenueChartCtx, {
            type: 'bar',
            data: {
                labels: topRevenueLabels,
                datasets: [{
                    label: 'Revenue',
                    data: topRevenueValues,
                    backgroundColor: 'rgba(153, 102, 255, 0.2)',
                    borderColor: 'rgba(153, 102, 255, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    });
</script>