<div id="reportsPage">
    <div class="" id="home">

        <div class="container">
            <div class="row">
                <div class="col">
                    <p class="text-white mt-5 mb-5">Welcome back, <b>Admin</b></p>
                </div>
            </div>
            <!-- row -->
            <div class="row tm-content-row">
                <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
                    <div class="tm-bg-primary-dark tm-block">
                        <h2 class="tm-block-title">Revenue Report</h2>
                        <select id="revenueTimeRange" class="form-control mb-3">
                            <option value="day" {{#if (eq timeRange 'day')}}selected{{/if}}>Day (7 recent days)</option>
                            <option value="week" {{#if (eq timeRange 'week')}}selected{{/if}}>Week (7 recent weeks)</option>
                            <option value="month" {{#if (eq timeRange 'month')}}selected{{/if}}>Month (7 recent months)</option>
                        </select>
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
                <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
                    <div class="tm-bg-primary-dark tm-block">
                        <h2 class="tm-block-title">Top Revenue by Product</h2>
                        <select id="topRevenueTimeRange" class="form-control mb-3">
                            <option value="day" {{#if (eq timeRange 'day')}}selected{{/if}}>Day Day (7 recent days)</option>
                            <option value="week" {{#if (eq timeRange 'week')}}selected{{/if}}>Week (7 recent weeks)</option>
                            <option value="month" {{#if (eq timeRange 'month')}}selected{{/if}}>Month (7 recent months)</option>
                        </select>
                        <canvas id="topRevenueChart"></canvas>
                    </div>
                </div>
                <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
                    <div class="tm-bg-primary-dark tm-block tm-block-taller tm-block-overflow">
                        <h2 class="tm-block-title">Notification List</h2>
                        <div class="tm-notification-items">
                            {{#each recentOrders}}
                            <div class="media tm-notification-item">
                                <div class="tm-gray-circle">
                                    <img src="{{this.url}}" alt="Avatar Image" class="rounded-circle avatar-fill">
                                </div>
                                <div class="media-body">
                                    <p class="mb-2"><b>{{this.customerName}}</b> placed an order with ID <b>{{this.id}}</b>.</p>
                                    <span class="tm-small tm-text-color-secondary">{{this.createdAt}}</span>
                                </div>
                            </div>
                            {{/each}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="tm-footer row tm-mt-small">
            <div class="col-12 font-weight-light">
                <p class="text-center text-white mb-0 px-4 small">
                    Copyright &copy; <b>2018</b> All rights reserved. 
                    
                    Design: <a rel="nofollow noopener" href="https://templatemo.com" class="tm-footer-link">Template Mo</a>
                </p>
            </div>
        </footer>
    </div>
</div>

<script>
    const revenueReport = {{{json revenueReport}}};
    const topRevenueProducts = {{{json topRevenueProducts}}};

    document.getElementById('revenueTimeRange').addEventListener('change', function() {
        const timeRange = this.value;
        window.location.href = `?timeRange=${timeRange}`;
    });

    document.getElementById('topRevenueTimeRange').addEventListener('change', function() {
        const timeRange = this.value;
        window.location.href = `?timeRange=${timeRange}`;
    });
</script>
<script src="/js/dashboard.js"></script>